<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- √ù c√¢u 4 -->
    <textarea id="inputTextarea" rows="5" cols="50"></textarea>
    <button id="convertButton">Convert</button>
    <div id="outputDiv"></div>
    <!-- √Ω c√¢u 1 A Closer Look at Functions -->
    <p>A Closer Look at Functions </p>
    <button class="answer-btn">Answer poll</button> 
    <script>
        //Data Structures, Modern Operators and Strings
        console.log('Data Structures, Modern Operators and Strings');
        //C√¢u 3:
        console.log('   Coding Challenge #3');

        const gameEvents = new Map([
        [17, "‚öΩ GOAL"],
        [36, "üîÅ Substitution"],
        [47, "‚öΩ GOAL"],
        [61, "üîÅ Substitution"],
        [64, "üî∂ Yellow card"],
        [69, "üî¥ Red card"],
        [70, "üîÅ Substitution"],
        [72, "üîÅ Substitution"],
        [76, "‚öΩ GOAL"],
        [80, "‚öΩ GOAL"],
        [92, "üî∂ Yellow card"]
        ]);

        //1
        const Events = [...new Set(gameEvents.values())];
        console.log(Events);

        //2
        gameEvents.delete(64);
        console.log(gameEvents);

        //3
        const eventsInGameTime = () => {
        const timeMatch = 90;
        let inGameTime = [];
        for (const [key] of gameEvents) {
            if (key <= timeMatch) inGameTime = [...inGameTime, key];
        }
        console.log(
            `An event happend, on average ${timeMatch / inGameTime.length} minutes`
        );
        };
        eventsInGameTime();
        
        //4
        const whichHalfTimeHappend = (mapArrays) => {
        for (const [key, value] of mapArrays) {
            key <= 45
            ? console.log(`[FIRST HALF] ${key}: ${value}`)
            : console.log(`[SECOND HALF] ${key}: ${value}`);
        }
        };

        whichHalfTimeHappend(gameEvents);

        //C√¢u 4:
        console.log('   Coding Challenge #4');
        document.getElementById('convertButton').addEventListener('click', function () {
        const inputText = document.getElementById('inputTextarea').value;
        const variableNames = inputText.split('\n'); // Split by newline character

        const outputDiv = document.getElementById('outputDiv');
        outputDiv.innerHTML = ''; // Clear previous results

        variableNames.forEach(function (variableName) {
            const words = variableName.split('_');
            let camelCaseName = words[0];

            // Convert to camelCase
            for (let i = 1; i < words.length; i++) {
            camelCaseName += words[i][0].toUpperCase() + words[i].slice(1);
            }

            // Display with corresponding number of ‚úÖ symbols
            const resultString = camelCaseName + ' ' + '‚úÖ'.repeat(camelCaseName.length - 1);
            const resultElement = document.createElement('p');
            resultElement.textContent = resultString;
            outputDiv.appendChild(resultElement);
        });
        });


        //A Closer Look at Functions
        console.log('\n\nA Closer Look at Functions');
        //C√¢u 1:
        console.log('   Coding Challenge #1');
        const poll = {
            question: "What is your favourite programming language?",
            options: ["JavaScript", "Python", "Rust", "C++"],
            answers: [0, 0, 0, 0],

            registerNewAnswer: function() {
                const input = prompt(
                    `${this.question}\n${this.options.join('\n')}\n(Write option number)`
                );
                const choice = parseInt(input);

                if (!isNaN(choice) && choice >= 0 && choice < this.options.length) {
                    this.answers[choice]++;
                } else {
                    alert('Invalid choice. Please choose a number between 0 and ' + (this.options.length - 1));
                }

                this.displayResults();
            },

            displayResults: function(type = 'array') {
                if (type === 'array') {
                    console.log(this.answers);
                } else if (type === 'string') {
                    console.log(`Poll results are ${this.answers.join(', ')}`);
                }
            },
        };

        document.querySelector('.answer-btn').addEventListener('click', function() {
            poll.registerNewAnswer();
        });

        //C√¢u 2:
        console.log('\n   Coding Challenge #2');
        (function () {
            const header = document.querySelector('h1');

            if (header) {
                header.style.color = 'red';

                document.body.addEventListener('click', function () {
                    header.style.color = 'blue';
                });
            } else {
                console.log('Ph·∫ßn t·ª≠ h1 kh√¥ng t·ªìn t·∫°i trong t√†i li·ªáu HTML.');
            }
        })();


        //Working With Arrays
        console.log('\n\nWorking With Arrays');
        //C√¢u 1:
        console.log('   Coding Challenge #1');
        function checkDogs(dogsJulia, dogsKate) {
            // T·∫°o m·ªôt b·∫£n sao shallow c·ªßa m·∫£ng dogsJulia ƒë·ªÉ kh√¥ng thay ƒë·ªïi tham s·ªë ƒë·∫ßu v√†o
            const juliaCorrected = dogsJulia.slice();

            // Lo·∫°i b·ªè tu·ªïi c·ªßa m√®o (2 tu·ªïi ƒë·∫ßu v√† 2 tu·ªïi cu·ªëi)
            juliaCorrected.splice(0, 1); // Lo·∫°i b·ªè tu·ªïi m√®o th·ª© nh·∫•t
            juliaCorrected.splice(-2); // Lo·∫°i b·ªè tu·ªïi m√®o th·ª© hai v√† th·ª© ba t·ª´ cu·ªëi

            // T·∫°o m·ªôt m·∫£ng ch·ª©a c·∫£ d·ªØ li·ªáu c·ªßa Julia (ƒë√£ s·ª≠a) v√† Kate
            const allDogs = [...juliaCorrected, ...dogsKate];

            // Duy·ªát qua t·ª´ng dog v√† ki·ªÉm tra xem n√≥ l√† ng∆∞·ªùi l·ªõn hay c√≤n l√† dog con
            allDogs.forEach((age, index) => {
                const dogType = age >= 3 ? 'adult' : 'puppy';
                console.log(`Dog number ${index + 1} is an ${dogType}, and is ${age} years old`);
            });
        }

        // Test d·ªØ li·ªáu
        const data1Julia = [3, 5, 2, 12, 7];
        const data1Kate = [4, 1, 15, 8, 3];
        checkDogs(data1Julia, data1Kate);

        const data2Julia = [9, 16, 6, 8, 3];
        const data2Kate = [10, 5, 6, 1, 4];
        checkDogs(data2Julia, data2Kate);

        // C√¢u 2
        console.log('\n   Coding Challenge #2');
        function calcAverageHumanAge(ages) {
            // T√≠nh tu·ªïi c·ªßa ch√≥ trong nƒÉm ng∆∞·ªùi b·∫±ng c√¥ng th·ª©c
            const humanAges = ages.map(dogAge => (dogAge <= 2) ? 2 * dogAge : 16 + dogAge * 4);

            // Lo·∫°i b·ªè t·∫•t c·∫£ c√°c ch√≥ d∆∞·ªõi 18 tu·ªïi (18 tu·ªïi l√† tu·ªïi ng∆∞·ªùi)
            const adults = humanAges.filter(age => age >= 18);

            // T√≠nh trung b√¨nh tu·ªïi c·ªßa t·∫•t c·∫£ c√°c ch√≥ ng∆∞·ªùi l·ªõn
            if (adults.length === 0) {
                return 0; // Tr√°nh chia cho 0 n·∫øu kh√¥ng c√≥ ch√≥ n√†o ·ªü ƒë·ªô tu·ªïi ng∆∞·ªùi l·ªõn
            }

            const average = adults.reduce((acc, age) => acc + age, 0) / adults.length;
            return average;
        }

        // Test d·ªØ li·ªáu cho C√¢u 2
        const data1 = [5, 2, 4, 1, 15, 8, 3];
        const data2 = [16, 6, 10, 5, 6, 1, 4];

        const avg1 = calcAverageHumanAge(data1);
        console.log(`Average human age of adult dogs in Data 1: ${avg1.toFixed(2)} years`);

        const avg2 = calcAverageHumanAge(data2);
        console.log(`Average human age of adult dogs in Data 2: ${avg2.toFixed(2)} years`);

        // C√¢u 3
        console.log('\n   Coding Challenge #3');
        const calcAverageHumanAge2 = ages =>
            ages
            .map(dogAge => (dogAge <= 2) ? 2 * dogAge : 16 + dogAge * 4)
            .filter(age => age >= 18)
            .reduce((acc, age, _, arr) => acc + age / arr.length, 0);

        // Test d·ªØ li·ªáu cho C√¢u 3
        const dt1 = [5, 2, 4, 1, 15, 8, 3];
        const dt2 = [16, 6, 10, 5, 6, 1, 4];

        const avg11 = calcAverageHumanAge2(dt1);
        console.log(`Average human age of adult dogs in Data 1: ${avg11.toFixed(2)} years`);

        const avg12 = calcAverageHumanAge2(dt2);
        console.log(`Average human age of adult dogs in Data 2: ${avg12.toFixed(2)} years`);

        // C√¢u 4
        console.log('\n   Coding Challenge #4');
        // Array ch·ª©a ƒë·ªëi t∆∞·ª£ng c·ªßa c√°c con ch√≥
        const dogs = [
            { weight: 22, owner: 'Alice' },
            { weight: 8, owner: 'Bob' },
            { weight: 13, owner: 'Matilda' },
            { weight: 32, owner: 'Sarah' },
            { weight: 19, owner: 'John' },
            { weight: 24, owner: 'Michael' },
        ];

        // 1. T√≠nh to√°n recommendedFood cho m·ªói con ch√≥ v√† th√™m v√†o ƒë·ªëi t∆∞·ª£ng
        dogs.forEach(dog => {
            dog.recommendedFood = Math.trunc(dog.weight ** 0.75 * 28);
        });

        // 2. T√¨m con ch√≥ c·ªßa Sarah v√† ki·ªÉm tra n·∫øu ƒÉn qu√° nhi·ªÅu ho·∫∑c qu√° √≠t
        const sarahDog = dogs.find(dog => dog.owner === 'Sarah');
        if (sarahDog) {
            if (sarahDog.recommendedFood < sarahDog.weight) {
                console.log(`Sarah's dog is eating too much.`);
            } else if (sarahDog.recommendedFood > sarahDog.weight) {
                console.log(`Sarah's dog is eating too little.`);
            } else {
                console.log(`Sarah's dog is eating the right amount.`);
            }
        }

        // 3. T·∫°o m·∫£ng ch·ª©a ch·ªß c·ªßa c√°c con ch√≥ ƒÉn qu√° nhi·ªÅu v√† qu√° √≠t
        const ownersEatTooMuch = dogs
            .filter(dog => dog.weight > dog.recommendedFood)
            .map(dog => dog.owner);

        const ownersEatTooLittle = dogs
            .filter(dog => dog.weight < dog.recommendedFood)
            .map(dog => dog.owner);

        // 4. Xu·∫•t th√¥ng b√°o cho t·ª´ng m·∫£ng t·∫°o ra ·ªü b∆∞·ªõc 3
        console.log(`${ownersEatTooMuch.join(' and ')}'s dogs eat too much!`);
        console.log(`${ownersEatTooLittle.join(' and ')}'s dogs eat too little!`);

        // 5. Ki·ªÉm tra xem c√≥ con ch√≥ n√†o ƒÉn ƒë√∫ng l∆∞·ª£ng th·ª©c ƒÉn ƒë·ªÅ xu·∫•t kh√¥ng
        const isAnyDogEatingRecommendedAmount = dogs.some(dog =>
            dog.weight === dog.recommendedFood
        );

        console.log(`Is there any dog eating the recommended amount? ${isAnyDogEatingRecommendedAmount}`);

        // 6. Ki·ªÉm tra xem c√≥ con ch√≥ n√†o ƒÉn m·ªôt l∆∞·ª£ng th·ª©c ƒÉn t·ªët kh√¥ng
        const isAnyDogEatingOkayAmount = dogs.some(dog =>
            dog.weight > dog.recommendedFood * 0.9 && dog.weight < dog.recommendedFood * 1.1
        );

        console.log(`Is there any dog eating an okay amount? ${isAnyDogEatingOkayAmount}`);

        // 7. T·∫°o m·∫£ng ch·ª©a c√°c con ch√≥ ƒÉn m·ªôt l∆∞·ª£ng th·ª©c ƒÉn t·ªët
        const dogsEatingOkayAmount = dogs.filter(dog =>
            dog.weight > dog.recommendedFood * 0.9 && dog.weight < dog.recommendedFood * 1.1
        );

        // 8. T·∫°o b·∫£n sao shallow c·ªßa m·∫£ng 'dogs' v√† s·∫Øp x·∫øp theo recommended food portion tƒÉng d·∫ßn
        const sortedDogs = [...dogs].sort((a, b) => a.recommendedFood - b.recommendedFood);

        console.log(sortedDogs);


        //Object Oriented Programming (OOP)
        console.log('\n\nObject Oriented Programming (OOP)');
        // C√¢u 1:
        console.log('   Coding Challenge #1');
        // 1. S·ª≠ d·ª•ng h√†m constructor ƒë·ªÉ t·∫°o ƒë·ªëi t∆∞·ª£ng 'Car'
        function Car(make, speed) {
            this.make = make;
            this.speed = speed;
        }

        // 2. Th√™m ph∆∞∆°ng th·ª©c 'accelerate' v√†o prototype c·ªßa 'Car'
        Car.prototype.accelerate = function () {
            this.speed += 10;
            console.log(`${this.make} is accelerating. New speed: ${this.speed} km/h`);
        };

        // 3. Th√™m ph∆∞∆°ng th·ª©c 'brake' v√†o prototype c·ªßa 'Car'
        Car.prototype.brake = function () {
            this.speed -= 5;
            console.log(`${this.make} is braking. New speed: ${this.speed} km/h`);
        };

        // 4. T·∫°o 2 ƒë·ªëi t∆∞·ª£ng 'Car' v√† th·ª±c hi·ªán th·ª≠ nghi·ªám 'accelerate' v√† 'brake'
        const car1a = new Car('BMW', 120);
        const car2a = new Car('Mercedes', 95);

        console.log(`Data car 1: ${car1a.make} going at ${car1a.speed} km/h`);
        console.log(`Data car 2: ${car2a.make} going at ${car2a.speed} km/h`);

        car1a.accelerate(); // TƒÉng t·ªëc xe 1 l·∫ßn
        car1a.accelerate(); // TƒÉng t·ªëc xe th√™m 1 l·∫ßn
        car1a.brake();      // Phanh xe 1 l·∫ßn

        car2a.accelerate(); // TƒÉng t·ªëc xe 1 l·∫ßn
        car2a.brake();      // Phanh xe 1 l·∫ßn

        // C√¢u 2:
        console.log('\n   Coding Challenge #2');
        // 1. T·∫°o l·ªõp 'CarCl' b·∫±ng c√°ch s·ª≠ d·ª•ng ES6 class
        class CarCl {
            constructor(make, speed) {
                this.make = make;
                this.speed = speed;
            }

            // 2. Th√™m getter 'speedUS' ƒë·ªÉ tr·∫£ v·ªÅ t·ªëc ƒë·ªô hi·ªán t·∫°i ·ªü d·∫°ng mi/h
            get speedUS() {
                return this.speed / 1.6;
            }

            // 3. Th√™m setter 'speedUS' ƒë·ªÉ thi·∫øt l·∫≠p t·ªëc ƒë·ªô hi·ªán t·∫°i ·ªü d·∫°ng mi/h (chuy·ªÉn ƒë·ªïi sang km/h tr∆∞·ªõc khi l∆∞u gi√° tr·ªã)
            set speedUS(speedInMPH) {
                this.speed = speedInMPH * 1.6;
            }

            // 4. Ph∆∞∆°ng th·ª©c 'accelerate' ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô
            accelerate() {
                this.speed += 10;
                console.log(`${this.make} is accelerating. New speed: ${this.speed} km/h`);
            }

            // 5. Ph∆∞∆°ng th·ª©c 'brake' ƒë·ªÉ gi·∫£m t·ªëc ƒë·ªô
            brake() {
                this.speed -= 5;
                console.log(`${this.make} is braking. New speed: ${this.speed} km/h`);
            }
        }

        // 6. T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng 'CarCl' m·ªõi v√† th·ª≠ nghi·ªám c√°c ph∆∞∆°ng th·ª©c, getter v√† setter
        const car1b = new CarCl('Ford', 120);
        console.log(`Data car 1: ${car1b.make} going at ${car1b.speed} km/h`);

        car1b.accelerate(); // TƒÉng t·ªëc
        car1b.brake();      // Phanh

        console.log(`Current speed in mi/h: ${car1b.speedUS}`); // ƒê·ªçc t·ªëc ƒë·ªô ·ªü d·∫°ng mi/h

        car1b.speedUS = 75; // ƒê·∫∑t t·ªëc ƒë·ªô ·ªü d·∫°ng mi/h
        console.log(`New speed in km/h: ${car1b.speed}`);

        // C√¢u 3:
        console.log('\n   Coding Challenge #3');
        // 1. Use a constructor function to implement an Electric Car (called 'EV') as a child class of 'Car'
        function EV(make, speed, charge) {
            Car.call(this, make, speed);
            this.charge = charge;
        }

        // Inherit from 'Car' prototype
        EV.prototype = Object.create(Car.prototype);

        // 2. Implement a 'chargeBattery' method
        EV.prototype.chargeBattery = function (chargeTo) {
            this.charge = chargeTo;
        };

        // 3. Implement an 'accelerate' method
        EV.prototype.accelerate = function () {
            this.speed += 20;
            this.charge -= 1;
            console.log(`${this.make} going at ${this.speed} km/h, with a charge of ${this.charge}%`);
        };

        // Create an electric car object for Challenge #3
        const electricCar3 = new EV('Tesla', 120, 23);

        // Experiment with calling 'accelerate', 'brake', and 'chargeBattery'
        console.log(`Data car 1: ${electricCar3.make} going at ${electricCar3.speed} km/h, with a charge of ${electricCar3.charge}%`);
        electricCar3.accelerate(); // Accelerate
        electricCar3.brake();      // Brake
        electricCar3.chargeBattery(90); // Charge to 90%
        electricCar3.accelerate(); // Accelerate after charging


        // C√¢u 4:
        console.log('\n   Coding Challenge #4');
        // 1. Re-create Challenge #3 using ES6 classes: create an 'EVCl' child class of the 'CarCl' class
        class EVCl extends CarCl {
            constructor(make, speed, charge) {
                super(make, speed);
                this._charge = charge; // Make the 'charge' property private
            }

            chargeBattery(chargeTo) {
                this._charge = chargeTo;
                return this;
            }

            accelerate() {
                this.speed += 20;
                this._charge -= 1;
                console.log(`${this.make} going at ${this.speed} km/h, with a charge of ${this._charge}%`);
                return this;
            }

            // Override the 'brake' method for EVCl
            brake() {
                this.speed -= 10; // Decrease speed by 10 for electric car
                console.log(`${this.make} is braking. New speed: ${this.speed} km/h`);
                return this;
            }
        }

        const electricCar4 = new EVCl('Rivian', 120, 23);

        console.log(`Data car 1: ${electricCar4.make} going at ${electricCar4.speed} km/h, with a charge of ${electricCar4._charge}%`);
        electricCar4.accelerate().brake().chargeBattery(90).accelerate();


        //ASYNCHRONOUS JAVASCRIPT
        console.log('\n\nASYNCHRONOUS JAVASCRIPT');
        // C√¢u 1:
        console.log('   Coding Challenge #1');

        
    </script>
</body>
</html>